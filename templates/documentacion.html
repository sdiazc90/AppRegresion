<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Documentación</title>

    <!-- Estilos básicos para acordeón -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: auto;
            max-width: 90%;
        }
        h1 {
            text-align: center;
        }
        .accordion {
            background-color: #eee;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        .accordion-header {
            cursor: pointer;
            padding: 15px;
            font-weight: bold;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .accordion-header:hover {
            background-color: #ddd;
        }
        .accordion-content {
            padding: 15px;
            display: none;
            border-top: 1px solid #ccc;
            background-color: #fafafa;
        }
        .accordion-content.show {
            display: block;
        }
        .accordion-header::after {
            content: "▶";
            transition: transform 0.3s ease;
        }
        .accordion-header.active::after {
            transform: rotate(90deg);
        }
        /* Para que el gráfico tome ancho completo */
        .plotly-graph {
            width: 100%;
            height: 400px;
        }
    </style>

    <!-- Librería Plotly CDN -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

    <!-- Botón para volver al índice -->
    <div style="margin: 20px; text-align: left;">
        <a href="/" style="text-decoration: none; font-size: 18px; color: #007BFF; font-weight: bold; display: inline-flex; align-items: center;">
            <!-- Flecha izquierda Unicode -->
            &#8592; Volver al inicio
        </a>
    </div>

    <h1>Documentación del Proyecto</h1>

    <!-- Acordeón Sección 1 -->
    <div class="accordion">
        <div class="accordion-header">1) Obtención y limpieza de datos</div>
        <div class="accordion-content">
    <p>Los datos se obtuvieron mediante scraping de MercadoLibre para las diez marcas mas vendidas en Argentina con sus respectivos modelos mas vendidos.</p>

<img src="static/images/MSA.png" alt="Gráfico MSA" style="max-width: 40%; height: auto; margin-top: 10px;" />

<p>Se extrajeron mas de 52000 publicaciones con características como:</p>
<ul>
<li>Marca</li>
<li>Modelo</li>
<li>Año</li>
<li>Tracción</li>
<li>Color</li>
<li>Tipo de combustible</li>
<li>Puertas</li>
<li>Transmisión</li>
<li>Motor</li>
<li>Tipo de carrocería</li>
<li>Fecha publicación</li>
<li>Kilómetros</li>
<li>Precio</li> 
</ul>
<p>Luego se procede a limpiar estos datos en los siguientes pasos:</p>
<ul>Elimino duplicados </ul>
<ul>Normalizacion de datos (minisculas, tildes, dieresis, exclamaciones,etc). </ul>
<ul>Mapeo y agrupacion de Color, Puertas, Transmisión, Tipo de carrocería, Tracción y Tipo de combustible </ul>
<ul>Corrección de datos incoherentes como Motores de cilindradas inexsistentes </ul>
<ul>Kilómetros, se eliminan los outliers y se imputan mediante algoritmo MICE </ul>
<ul>En cuanto a Fecha de publicación se eliminan los que tengan fechas mayores a 365 dias de publicación, por presuponerse desactualizados </ul>
<ul>Precio, se transforma los precios en dolares a pesos argentinos y se eliminan los outliers, no se imputan por ser la variable a predecir, la logica en torno al precio es que un auto usado no puede valer mas que el modelo 0 kilometros y luego se eliminan outliers agrupados por modelo y año.</ul>
<iframe src="static/plots/precio_modelo_selectivo.html"
                style="width: 90%; min-width: 1000px; height: 700px; border: none; display: block; margin-bottom: 10px;">
        </iframe>
        </div>
    </div>

    <!-- Acordeón Sección 2 -->
<div class="accordion">
    <div class="accordion-header">2) Análisis de Datos</div>
    <div class="accordion-content" style="overflow-x: auto; padding-bottom: 20px;">
        <p>En esta seccion se muestran algunas graficas de los datos limpios</p>

        <iframe src="static/plots/precio_medio_marcas.html"
                style="width: 95%; min-width: 1000px; height: 700px; border: none; display: block; margin-bottom: 10px;">
        </iframe>
        <p>Podemos ver como marcas como Jeep tienen una re-evaluación de precio para vehiculos antiguos. </p>
        <p>Ademas se puede ver un pico de Jeep en 2015, esto es real, ya que de ese año no hay modelos de gama "baja" (compass, renegade) publicados, ni en ML, ni en otras paginas por lo que la media es elevada, ya que solo hay Wrangler y Grand-Cherokee. </p>
        <iframe src="/static/plots/violin_precios_marcas.html"
                style="width: 90%; min-width: 1000px; height: 700px; border: none; display: block; margin-bottom: 20px;">
        </iframe>
        <p>Ademas una alta dispersión de precio entre modelos </p>
        <iframe src="/static/plots/treemap_marcas_modelos.html"
                style="width: 90%; min-width: 1000px; height: 700px; border: none; display: block; margin-bottom: 20px;">
        </iframe>
        <p>Y como en promedio los vehiculos usados Jeep son los mas caros, a diferencia de los Citroen y Renault. Incluso si estas ultimas las comparamos con modelos de la misma gama de otra Marca </p>
        <iframe src="/static/plots/correlacion_mapa.html"
                style="width: 60%; min-width: 500px; height: 500px; border: none; display: block; margin-bottom: 20px;">
        </iframe>
    </div>
</div>


    <!-- Acordeón Sección 3 -->
    <div class="accordion">
        <div class="accordion-header">3) Entrenamiento de Modelo</div>
        <div class="accordion-content">
            <p>Finalmente para entrenar modelos de Machine Learning utilizamos tres. Con su respectivo proceso de seleccion de variables, encoding, split y Cross Validation</p>
<ul>Regresion lineal (baseline) </ul>
<ul>Random Forest </ul>
<ul>XGBoost </ul>
<img src="static/images/r2_modelosconeleccion_sin_tuneo.png" alt="Gráfico R2 Modelos" style="max-width: 60%; height: auto;">
<p>Luego pasamos a tunear hiperparametros de los dos mejores </p>
<img src="static/images/r2_modelosconeleccion_con_tuneo.png" alt="Gráfico R2 Modelos" style="max-width: 60%; height: auto;">
<p>Finalmente el mejor modelo con busqueda de hiperparametros es XGBoost </p>
        </div>
    </div>

    <script>
        // Funcionalidad acordeón para abrir/cerrar secciones
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const active = header.classList.contains('active');
                // Cerrar todos
                document.querySelectorAll('.accordion-header').forEach(h => h.classList.remove('active'));
                document.querySelectorAll('.accordion-content').forEach(c => c.classList.remove('show'));
                // Abrir el que se hizo click si no estaba abierto
                if (!active) {
                    header.classList.add('active');
                    header.nextElementSibling.classList.add('show');
                }
            });
        });

     
    </script>
<!-- Botón para volver al índice -->
<div style="margin: 20px; text-align: left;">
    <a href="/" style="text-decoration: none; font-size: 18px; color: #007BFF; font-weight: bold; display: inline-flex; align-items: center;">
        &#8592; Volver al inicio
    </a>
</div>

</body>
</html>
